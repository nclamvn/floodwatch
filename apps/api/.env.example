# ============================================
# FloodWatch API - Environment Variables
# ============================================
#
# SECURITY NOTICE:
# - NEVER commit real secrets to version control
# - Use different values for dev/staging/production
# - Rotate secrets regularly in production
# - Use a secrets manager in production (e.g., AWS Secrets Manager, Vault)
#
# ============================================

# -------------------- Environment --------------------
ENVIRONMENT=development  # development | staging | production

# -------------------- Database --------------------
# PostgreSQL connection string with PostGIS
# SECURITY: Use strong password, restrict network access
DATABASE_URL=postgresql://user:password@localhost:5432/floodwatch

# -------------------- Admin Authentication --------------------
# ADMIN_TOKEN: Legacy token for /ops dashboard (deprecated, use ADMIN_PASSWORD_HASH)
ADMIN_TOKEN=your-secure-random-token-here

# ADMIN_PASSWORD_HASH: Bcrypt hash of admin password
# Generate with: python -c "from app.dependencies.admin_auth import generate_password_hash; print(generate_password_hash('your-password'))"
# SECURITY: NEVER store plaintext passwords
# ADMIN_PASSWORD_HASH=$2b$12$xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ADMIN_RESCUE_PASSWORD: Development only plaintext password (DO NOT USE IN PRODUCTION)
# Set ADMIN_PASSWORD_HASH instead for production
ADMIN_RESCUE_PASSWORD=change-this-in-production

# Admin session TTL in hours (default: 24)
ADMIN_SESSION_TTL_HOURS=24

# -------------------- CORS Configuration --------------------
# Comma-separated list of allowed origins
# SECURITY: Be specific in production, avoid wildcards
CORS_ORIGINS=http://localhost:3000

# -------------------- OpenAI (AI News + TTS) --------------------
# Get key from: https://platform.openai.com/api-keys
# SECURITY: Use separate keys for dev/prod, set usage limits
OPENAI_API_KEY=sk-proj-your_key_here

# TTS Voice Configuration
TTS_ALTERNATING_VOICES=true
TTS_VOICE=alloy

# -------------------- Cloudinary (Media CDN) --------------------
# For image/audio uploads
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret

# Alternative: Cloudinary URL format
# CLOUDINARY_URL=cloudinary://api_key:api_secret@cloud_name

# -------------------- Telegram Bot --------------------
# SECURITY: Keep bot token secret, use separate bot for dev/prod
TELEGRAM_BOT_TOKEN=your_telegram_bot_token

# -------------------- Rate Limiting --------------------
# Enable/disable rate limiting (default: true in production)
RATE_LIMITING_ENABLED=true

# Redis URL for rate limiting (optional, uses in-memory by default)
# REDIS_URL=redis://localhost:6379/0

# -------------------- Audit Logging --------------------
# Enable database audit logging (default: false)
AUDIT_LOG_DB=false

# Audit log file path
AUDIT_LOG_PATH=logs/audit.log

# -------------------- Map Providers --------------------
MAPTILER_API_KEY=your_maptiler_key

# -------------------- Ingestion Scheduler --------------------
# Auto-run scrapers on startup
ENABLE_SCHEDULER=false

# Scraper run interval in minutes
SCRAPER_INTERVAL_MINUTES=30

# -------------------- External APIs --------------------
# Weather data source
WEATHER_API_KEY=your_weather_api_key

# -------------------- Monitoring --------------------
# Sentry DSN for error tracking (production)
# SENTRY_DSN=https://xxxxx@sentry.io/xxxxx

# Enable Prometheus metrics endpoint
METRICS_ENABLED=true

# ============================================
# SECURITY CHECKLIST - Before deploying:
# ============================================
# [ ] All placeholder values replaced with real secrets
# [ ] DATABASE_URL uses strong password
# [ ] ADMIN_PASSWORD_HASH set (not ADMIN_RESCUE_PASSWORD)
# [ ] CORS_ORIGINS is specific (no wildcards)
# [ ] OPENAI_API_KEY has usage limits set
# [ ] ENVIRONMENT=production
# [ ] Secrets are not committed to Git
# [ ] Backup secrets are stored securely
# ============================================
